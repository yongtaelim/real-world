# 실전 자바 소프트웨어 개발
study...

## 입출금 내역 분석기
### 목표
- SRP ( single responsibility principle )
  - 응집도, 결합도

### KISS 원칙
- keep it short and simple
- 응용프로그램 코드를 한 개의 클래스로 구현한다.

### 코드 유지보수성과 안티 패턴
- 코드 유지보수성을 높이기 위해 노력해야한다.
  - 특정 기능을 담당하는 코드를 쉽게 찾을 수 있어야 한다.
  - 코드가 어떤 일을 수행하는지 쉽게 이해할 수 있어야 한다.
  - 새로운 기능을 쉽게 추가하거나 기존 기능을 쉽게 제거할 수 있어야 한다.
  - ```캡슐화```(encapsulation)가 잘 되어 있어야 한다. 즉 코드 사용자에게는 세부 구현 내용이 감춰져 있으므로 사용자가 쉽게 코드를 이해하고, 기능을 바꿀 수 있어야한다.

- 새로운 요구 사항이 생길 때마다 복사, 붙여넣기로 해결한다면 하기와 같은 문제점이 생길 수 있다. 이는 효과적이지 않은 해결 방법으로 ```안티 패턴```이라고 부른다.
  - 한 개의 거대한 ```갓 클래스``` 때문에 코드를 이해하기 어렵다.
  - ```코드 중복``` 때문에 코드가 불안정하고 변화에 쉽게 망가진다.
  
#### 갓 클래스
한 개의 파일에 모든 코드를 구현하다 보면 결국 하나의 거대한 클래스가 탄생하면서 클래스의 목적이 무엇인지 이해하기 어려워진다. 이런 문제를 갓 클래스 안티 패턴이라 부른다.

#### 코드 중복
여러 곳에 코드가 중복되어 있는 현상

```중복 코드 배제(DRY) : 반복을 제거하면 로직을 바꿔도 여러 곳의 코드를 바꿔야 할 필요성이 없어진다.```

### 단일 책임 원칙 (SRP)
- 한 클래스는 한 기능만 책임진다.
- 클래스가 바뀌어야 하는 이유는 오직 하나여야 한다.

#### 클래스 수준 응집도
- 기능
  - 기능 별로 구현.
  - 너무 과도하게 만들면 생각해야 할 클래스가 많아지므로 코드가 장황해지고 복잡해진다.
- 정보
  - 같은 데이터나 도메인 객체를 처리하는 메서드를 그룹화하는 방법.
  - 예를 들어 BankTransaction 객체를 만들고 CRUD 연산이 필요하면 이런 기능만 제공하는 클래스를 만들어야한다.
  - 여러 기능을 그룹화하면서, 필요한 일부 기능을 ㅗ함하는 클래스 전체를 디펜던시로 추가한다는 약점이 있다.
- 유틸리티
  - 떄로는 관련성이 없는 메서드를 한 클래스로 포함시켜야한다. 메서드가 어디에 속해야할지 결정하기 어려울 때는 유틸리트 클래스에 추가하기도 한다.
  - 유틸리티 클래스 사용은 낮은 응집도로 이어지므로 자제해야한다.
- 논리
  - CSV, JSON, XML의 자료를 파싱하는 코드로 예를 들어본다. 메서드는 ```파싱```이라는 논리로 그룹화되었다.하지만 이 메서드들은 본직적으로 다르며 서로 관련이 없다. 또한 이렇게 그룹화하면, 클래스는 네가지 책임을 갖게 되므로 SRP를 위배된다.
- 순차
  - 파일을 읽고, 파싱하고, 처리하고, 정보를 저장하는 메서드들은 한 클래스로 그룹화한다. 파일을 읽은 결과는 파싱의 입력이 되고, 파싱의 결과는 처리 과정의 입력이 되는 등의 과정이 반복된다.
  - 입출력이 순차적으로 흐르는 것을 순차 응집이라 부른다.
  - 실전에서는 순차 응집을 적용하면 한 클래스를 바꿔야 할 여러 이유가 존재하므로 SRP를 위배된다. 
  - 따라서 각 책임을 개별적으로 응집된 클래스로 분리하는 것이 더 좋다.
- 시간
  - 여러 연산 중 시간과 관련된 연산을 그룹화한다.
  - 어떤 처리 작업을 시작하기 전과 뒤에 초기화, 뒷정리 작업(e.q. 데이터베이스 연결과 종료)을 담당하는 메서드를 포함하는 클래스가 그 예다.
  - 초기화 작업은 다른 작업과 관련이 없지만, 다른 작업보다 먼저 실행되어야 한다.
  
#### 메서드 수준 응집도
- 메서드가 다양한 기능을 수행할수록 메서드가 어떤 동작을 하는지 이해하기가 점점 어려워진다.
- 메서드가 연관이 없는 여러일을 처리한다면 응집도가 낮아진다. 응집도가 낮은 메서드는 여러 책임을 포함하기 때문에 각 책임을 테스트하기가 어렵고, 메서드의 책임도 테스트하기가 어렵다. 
- 일반적으로 클래스나 메서드 파라미터의 여러 필드를 바꾸는 if/else 블록이 여러개 포함되어 있다면, 이는 응집도 문제가 있음을 의미하므로 응집도가 높은 더 작은 조각으로 메서드를 분리해야한다.
